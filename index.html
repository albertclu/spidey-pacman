<!DOCTYPE html>
<html lang="en">
    <head>
            <meta charset="UTF-8">
            <title>Spiderman vs Villains</title>
        <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
        <style>
                    * {
                                    box-sizing: border-box;
                    }
                    html, body {
                                    margin: 0;
                                    padding: 0;
                                    width: 100%;
                                    height: 100%;
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    min-height: 100vh;
                                    font-family: 'Courier New', Courier, monospace;
                    }
                    body {
                                    background-color: #000;
                    }

                    #game-container {
                                    position: relative;
                    }

                    .ui-screen {
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 800px;
                                    height: 600px;
                                    display: flex;
                                    flex-direction: column;
                                    justify-content: center;
                                    align-items: center;
                                    z-index: 1000;
                                    background-color: rgba(0, 0, 0, 0.9);
                    }

                    .ui-screen.hidden {
                                    display: none;
                    }

                    #start-screen {
                                    color: #23e836;
                    }

                    #start-screen h1 {
                                    font-size: 48px;
                                    margin-bottom: 20px;
                                    text-shadow: 0 0 10px #23e836;
                    }

                    #start-screen p {
                                    font-size: 16px;
                                    margin: 10px 0;
                    }

                    #start-screen button {
                                    margin-top: 30px;
                                    padding: 10px 20px;
                                    font-size: 20px;
                                    background-color: #23e836;
                                    color: #000;
                                    border: none;
                                    cursor: pointer;
                                    text-transform: uppercase;
                    }

                    #level-complete-screen {
                                    color: #23e836;
                    }

                    #level-complete-screen h1 {
                                    color: #f0d000;
                                    font-size: 48px;
                                    margin-bottom: 20px;
                    }

                    #level-info {
                                    font-size: 24px;
                                    margin: 10px 0;
                    }

                    #level-score {
                                    font-size: 20px;
                                    margin: 10px 0;
                    }

                    #game-over-screen {
                                    color: #23e836;
                    }

                    #game-over-screen h1 {
                                    color: #e23636;
                                    font-size: 48px;
                                    margin-bottom: 20px;
                    }

                    #game-over-screen p {
                                    font-size: 20px;
                    }

                    #final-score {
                                    margin-top: 20px;
                    }

                    #congratulations-screen {
                                    color: #23e836;
                    }

                    #congratulations-screen h1 {
                                    color: #f0d000;
                                    font-size: 48px;
                                    margin-bottom: 20px;
                                    text-shadow: 0 0 20px #f0d000;
                    }

                    #congratulations-screen p {
                                    font-size: 20px;
                                    margin: 10px 0;
                    }

                    .congratulations-image {
                                    margin-top: 20px;
                                    filter: drop-shadow(0 0 10px #f0d000);
                    }

                    #final-score {
                                    margin-top: 20px;
                    }

                    #win-score {
                                    margin-top: 20px;
                    }

                    #play-again-button {
                                    margin-top: 20px;
                                    padding: 10px 20px;
                                    font-size: 20px;
                                    background-color: #23e836;
                                    color: #000;
                                    border: none;
                                    cursor: pointer;
                                    text-transform: uppercase;
                    }

                    #next-level-button {
                                    margin-top: 20px;
                                    padding: 10px 20px;
                                    font-size: 20px;
                                    background-color: #23e836;
                                    color: #000;
                                    border: none;
                                    cursor: pointer;
                                    text-transform: uppercase;
                    }
                </style>
    </head>
    <body>
            <div id="game-container"></div>div>

            <div id="start-screen" class="ui-screen">
                        <h1 style="color:#e23636;">SPIDERMAN GAME</h1>h1>
                        <p>Collect all the yellow dots and avoid the villains<br>Use arrow keys to move.<br>5 Levels</p>
                    <button onclick="startGame()">PLAY GAME</button>button>
            </div>div>
    
        <div id="level-complete-screen" class="ui-screen hidden">
                <h1 style="color:#f0d000;">LEVEL COMPLETE!</h1>h1>
                <p id="level-info" style="font-size:24px; margin:10px 0;"></p>
                <p id="level-score" style="font-size:20px; margin:10px 0;"></p>
                <button onclick="nextLevel()">NEXT LEVEL</button>button>
        </div>div>
    
        <div id="game-over-screen" class="ui-screen hidden">
                <h1 style="color:#e23636;">GAME OVER</h1>h1>
                <p>Spidey got caught !</p>
                <p id="final-score"></p>
                <button onclick="location.reload()">TRY AGAIN</button>button>
        </div>div>
    
        <div id="congratulations-screen" class="ui-screen hidden">
                <h1 style="color:#f0d000;">YOU WON ALL 5 LEVELS!</h1>h1>
                <p style="font-size:24px; margin:10px 0;">You have beaten the Spidey Pac-Man Game!!!</p>
                <img src="Assets/spiderman.png" alt="Spiderman" class="congratulations-image" style="filter: drop-shadow(0 0 10px #f0d000);">
                <p style="font-size:20px; color:#f0d000; margin-top: 10px;">ðŸŽ‰ ðŸŽŠ ðŸŽ‰</p>
                <p id="win-score"></p>
                <button onclick="location.reload()">PLAY AGAIN</button>button>
        </div>div>
    
        <script>
                    const GRID_SIZE = 40;
                    const GAME_WIDTH = 800;
                    const GAME_HEIGHT = 600;
                    const COLS = GAME_WIDTH / GRID_SIZE;
                    const ROWS = GAME_HEIGHT / GRID_SIZE;
                    const BASE_VILLAIN_SPEED = 2;
                    const NUM_LEVELS = 5;

                    let gameState = {
                                    score: 0,
                                    bestScore: localStorage.getItem('bestScore') ? parseInt(localStorage.getItem('bestScore')) : 0,
                                    currentLevel: 0,
                                    gameOver: false,
                                    levelComplete: false,
                                    game: null,
                                    player: null,
                                    villains: [],
                                    dots: [],
                                    dotsCollected: 0,
                                    dotsRequired: 0
                    };

                    const mazeLevels = [
                                    // Level 1 - Simple maze
                                    [
                                                        "####################",
                                                        "#........#.........#",
                                                        "#.######.#.#######.#",
                                                        "#.#....#.#.#.....#.#",
                                                        "#.#.##.#.#.#.###.#.#",
                                                        "#...#..#.#.#.#...#.#",
                                                        "####.###.#.#.#.###.#",
                                                        "#....#...#...#.....#",
                                                        "#.####.###.###.###.#",
                                                        "#........#.........#",
                                                        "####################"
                                                    ],
                                    // Level 2 - More complex
                                    [
                                                        "####################",
                                                        "#.......#.........#.",
                                                        "#.#####.#.#######.#.",
                                                        "#.#...#.#.#.....#.#.",
                                                        "#.#.#.#.#.#.###.#.#.",
                                                        "#.#.#.#.#.#.#...#.#.",
                                                        "#.#.#.#.#.#.#.###.#.",
                                                        "#...#...#...#.....#.",
                                                        "#.#########.#######.",
                                                        "#.........#.........#",
                                                        "####################"
                                                    ],
                                    // Level 3 - Challenging maze
                                    [
                                                        "####################",
                                                        "#.......#.......#..#",
                                                        "#.#####.#.#####.#.##",
                                                        "#.#...#.#.#...#.#.#.",
                                                        "#.#.#.#.#.#.#.#.#.#.",
                                                        "#.#.#.#.#.#.#.#.#.#.",
                                                        "#...#...#...#...#..#",
                                                        "#.#########.#####.##",
                                                        "#.#.......#.#.....#.",
                                                        "#.#.#####.#.#.###.#.",
                                                        "####################"
                                                    ],
                                    // Level 4 - Hard maze
                                    [
                                                        "####################",
                                                        "#.....#.......#....#",
                                                        "#.###.#.#####.#.##.#",
                                                        "#.#...#.#...#.#.#..#",
                                                        "#.#.###.#.#.#.#.###.",
                                                        "#.#.....#.#.#.#....#",
                                                        "#.#####.#.#.#.####.#",
                                                        "#.....#.#.#.#.....#.",
                                                        "#.###.#.#.#.#.###.#.",
                                                        "#.....#.....#.....#.",
                                                        "####################"
                                                    ],
                                    // Level 5 - Very hard maze
                                    [
                                                        "####################",
                                                        "#....#....#....#...#",
                                                        "#.##.#.##.#.##.#.#.#",
                                                        "#.#..#.#..#.#..#.#.#",
                                                        "#.#.##.#.##.#.##.#.#",
                                                        "#.#.....#.....#...#.",
                                                        "#.######.#####.###.#",
                                                        "#.#....#.#...#.....#",
                                                        "#.#.##.#.#.#.#####.#",
                                                        "#.....#.....#.......#",
                                                        "####################"
                                                    ]
                                ];

                    function getVillainCountForLevel(level) {
                                    // Level 1: 4, Level 2: 4, Level 3: 5, Level 4: 5, Level 5: 6
                                    if (level === 0) return 4;
                                    if (level === 1) return 4;
                                    if (level === 2) return 5;
                                    if (level === 3) return 5;
                                    if (level === 4) return 6;
                                    return 4;
                    }

                    const config = {
                                    type: Phaser.AUTO,
                                    width: GAME_WIDTH,
                                    height: GAME_HEIGHT,
                                    parent: 'game-container',
                                    physics: {
                                        default: 'arcade',
                                                        arcade: {
                                                                                gravity: { y: 0 },
                                                                                debug: false
                                                        }
                                    },
                                    scene: {
                                                        preload: preload,
                                                        create: create,
                                                        update: update
                                    }
                    };

                    function preload() {
                                    // Assets are already in the repository
                    }

                    function create() {
                                    gameState.game = this;
                                    createLevel();
                    }

                    function update() {
                                    if (gameState.gameOver || gameState.levelComplete) {
                                                        return;
                                    }

                                    // Player movement
                                    const cursors = gameState.game.input.keyboard.createCursorKeys();
                                    const speed = 300;

                                    if (cursors.left.isDown) {
                                                        gameState.player.setVelocity(-speed, 0);
                                    } else if (cursors.right.isDown) {
                                                        gameState.player.setVelocity(speed, 0);
                                    } else if (cursors.up.isDown) {
                                                        gameState.player.setVelocity(0, -speed);
                                    } else if (cursors.down.isDown) {
                                                        gameState.player.setVelocity(0, speed);
                                    } else {
                                                        gameState.player.setVelocity(0, 0);
                                    }

                                    // Check if all dots collected
                                    if (gameState.dotsCollected === gameState.dotsRequired) {
                                                        endLevel();
                                    }
                    }

                    function createLevel() {
                                    // Clear previous level
                                    if (gameState.player) gameState.player.destroy();
                                    gameState.villains.forEach(v => v.destroy());
                                    gameState.dots.forEach(d => d.destroy());
                                    gameState.villains = [];
                                    gameState.dots = [];
                                    gameState.dotsCollected = 0;

                                    const maze = mazeLevels[gameState.currentLevel];
                                    const centerX = (GAME_WIDTH - maze[0].length * GRID_SIZE) / 2;
                                    const centerY = (GAME_HEIGHT - maze.length * GRID_SIZE) / 2;

                                    // Create walls and dots
                                    for (let row = 0; row < maze.length; row++) {
                                                        for (let col = 0; col < maze[row].length; col++) {
                                                                                const x = centerX + col * GRID_SIZE + GRID_SIZE / 2;
                                                                                const y = centerY + row * GRID_SIZE + GRID_SIZE / 2;

                                                                                if (maze[row][col] === '#') {
                                                                                                            const wall = gameState.game.add.rectangle(x, y, GRID_SIZE, GRID_SIZE, 0x0066ff);
                                                                                                            gameState.game.physics.world.enable(wall);
                                                                                                            wall.body.setImmovable();
                                                                                    } else if (maze[row][col] === '.') {
                                                                                                            const dot = gameState.game.add.circle(x, y, 4, 0xffff00);
                                                                                                            gameState.game.physics.world.enable(dot);
                                                                                                            dot.body.setImmovable();
                                                                                                            gameState.dots.push(dot);
                                                                                    }
                                                        }
                                    }

                                    gameState.dotsRequired = gameState.dots.length;

                                    // Create player at center
                                    gameState.player = gameState.game.add.rectangle(GAME_WIDTH / 2, GAME_HEIGHT / 2, GRID_SIZE - 4, GRID_SIZE - 4, 0xff0000);
                                    gameState.game.physics.world.enable(gameState.player);
                                    gameState.player.body.setCollideWorldBounds();
                                    gameState.player.body.setBounce(0, 0);

                                    // Create villains
                                    const villainCount = getVillainCountForLevel(gameState.currentLevel);
                                    for (let i = 0; i < villainCount; i++) {
                                                        const villainX = Math.random() * (GAME_WIDTH - 100) + 50;
                                                        const villainY = Math.random() * (GAME_HEIGHT - 100) + 50;

                                                        const villain = gameState.game.add.rectangle(villainX, villainY, GRID_SIZE - 4, GRID_SIZE - 4, 0xff6600);
                                                        gameState.game.physics.world.enable(villain);
                                                        villain.body.setVelocity(Phaser.Math.Between(-BASE_VILLAIN_SPEED * 100, BASE_VILLAIN_SPEED * 100), Phaser.Math.Between(-BASE_VILLAIN_SPEED * 100, BASE_VILLAIN_SPEED * 100));
                                                        villain.body.setCollideWorldBounds(true);
                                                        villain.body.setBounce(1, 1);
                                                        gameState.villains.push(villain);
                                    }

                                    // Collisions
                                    gameState.game.physics.overlap(gameState.player, gameState.dots, collectDot);
                                    gameState.game.physics.overlap(gameState.player, gameState.villains, hitVillain);
                    }

                    function collectDot(player, dot) {
                                    dot.destroy();
                                    gameState.score += 10;
                                    gameState.dotsCollected++;
                                    gameState.dots = gameState.dots.filter(d => d.active);
                    }

                    function hitVillain(player, villain) {
                                    gameState.gameOver = true;
                                    endGame();
                    }

                    function endLevel() {
                                    gameState.levelComplete = true;
                                    document.getElementById('level-info').textContent = 'LEVEL ' + (gameState.currentLevel + 1) + ' COMPLETE!';
                                    document.getElementById('level-score').textContent = 'Score: ' + gameState.score;
                                    document.getElementById('level-complete-screen').classList.remove('hidden');
                    }

                    function nextLevel() {
                                    gameState.currentLevel++;
                                    if (gameState.currentLevel >= NUM_LEVELS) {
                                                        // Game won!
                                                        showVictory();
                                    } else {
                                                        gameState.levelComplete = false;
                                                        document.getElementById('level-complete-screen').classList.add('hidden');
                                                        createLevel();
                                    }
                    }

                    function endGame() {
                                    if (gameState.bestScore < gameState.score) {
                                                        gameState.bestScore = gameState.score;
                                                        localStorage.setItem('bestScore', gameState.bestScore);
                                    }
                                    document.getElementById('final-score').textContent = 'Score: ' + gameState.score + ' | Best: ' + gameState.bestScore;
                                    document.getElementById('game-over-screen').classList.remove('hidden');
                    }

                    function showVictory() {
                                    if (gameState.bestScore < gameState.score) {
                                                        gameState.bestScore = gameState.score;
                                                        localStorage.setItem('bestScore', gameState.bestScore);
                                    }
                                    document.getElementById('win-score').textContent = 'Final Score: ' + gameState.score + ' | Best: ' + gameState.bestScore;
                                    document.getElementById('congratulations-screen').classList.remove('hidden');
                    }

                    function startGame() {
                                    gameState.currentLevel = 0;
                                    gameState.score = 0;
                                    gameState.gameOver = false;
                                    gameState.levelComplete = false;
                                    document.getElementById('start-screen').classList.add('hidden');
                                    if (!gameState.game) {
                                        
                                                        const game = new Phaser.Game(config);
                                                        gameState.game = game;
                                    } else {
                                                        createLevel();
                                    }
                    }
        </script>
    </body>
</html>html>
        </script></p></p>
    </body>
        </style></title>
    </head>            Page_DownPage_Down
